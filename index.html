<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lueurs d'√Çmes - Bougies √† Messages Pr√©dictifs</title>
  <style>
    /* Reset & base */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: #f9f7fd;
      color: #3c2870;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* HEADER */
    header {
      width: 100%;
      max-width: 1200px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #3c2870;
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 1000;
      color: #f2e9f7;
    }
    .menu-wrapper {
      position: relative;
    }
    #menuBtn {
      background: #5a4099;
      border: none;
      color: #f2e9f7;
      padding: 0.4rem 1rem;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      user-select: none;
      transition: background-color 0.3s;
    }
    #menuBtn:hover {
      background: #7a56d1;
    }
    .menu-list {
      position: absolute;
      top: 110%;
      left: 0;
      background: #462f85;
      border-radius: 0 0 10px 10px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.5);
      min-width: 180px;
      padding: 0.5rem 0;
      z-index: 1500;
    }
    .menu-list ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .menu-list li {
      margin: 0;
    }
    .menu-list button.category-btn {
      width: 100%;
      background: transparent;
      border: none;
      color: #d6b8ff;
      padding: 0.6rem 1.2rem;
      text-align: left;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .menu-list button.category-btn:hover,
    .menu-list button.category-btn.active {
      background: #7a56d1;
      color: white;
    }
    .brand-name {
      font-size: 1.8rem;
      font-weight: 800;
      color: #bb8cff;
      user-select: none;
      text-shadow: 0 0 6px #d0a9ff88;
      flex: 1;
      text-align: center;
    }
    .header-icons {
      display: flex;
      gap: 1.5rem;
      align-items: center;
      font-size: 1.4rem;
      cursor: pointer;
      position: relative;
    }
    .header-icons .icon {
      color: #d6b8ff;
      position: relative;
      user-select: none;
    }
    .header-icons .icon.cart::after {
      content: attr(data-count);
      position: absolute;
      top: -8px;
      right: -10px;
      background: #ff4081;
      color: white;
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 50%;
      display: none;
      pointer-events: none;
    }
    .header-icons .icon.cart[data-count]:not([data-count="0"])::after {
      display: block;
    }

    /* PRODUITS */
    main {
      width: 100%;
      max-width: 1200px;
      padding: 2rem 1rem;
      flex: 1;
    }
    #productsGrid {
      display: grid;
      grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
      gap: 1.8rem;
    }
    .product-card {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 2px 8px rgba(60,40,112,0.1);
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease;
    }
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 15px rgba(60,40,112,0.2);
    }
    .product-name {
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 0.3rem;
      color: #4b3285;
    }
    .product-description {
      font-size: 0.9rem;
      color: #6e5a9a;
      margin-bottom: 0.8rem;
      flex-grow: 1;
    }
    .product-price {
      font-weight: 700;
      font-size: 1.1rem;
      color: #7a56d1;
      margin-bottom: 1rem;
    }
    .quantity-wrapper {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      margin-bottom: 1rem;
    }
    .quantity-wrapper label {
      font-weight: 600;
      color: #3c2870;
    }
    .quantity-wrapper input[type="number"] {
      width: 60px;
      padding: 0.3rem 0.5rem;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      text-align: center;
    }
    .add-to-cart-btn {
      background: #7a56d1;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 0.6rem;
      font-weight: 700;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .add-to-cart-btn:hover {
      background: #5a4099;
    }

    /* PANIER */
    #cartModal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.3);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }
    #cartModal.active {
      display: flex;
    }
    #cartContent {
      background: white;
      border-radius: 12px;
      max-width: 400px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      padding: 1rem 1.5rem;
      box-shadow: 0 0 20px rgba(60,40,112,0.3);
      display: flex;
      flex-direction: column;
    }
    #cartContent h2 {
      margin-top: 0;
      color: #3c2870;
      font-weight: 800;
      margin-bottom: 1rem;
    }
    .cart-item {
      border-bottom: 1px solid #ddd;
      padding: 0.8rem 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .cart-item:last-child {
      border-bottom: none;
    }
    .cart-item-name {
      font-weight: 600;
      color: #4b3285;
      flex: 1;
    }
    .cart-item-qty {
      margin-left: 1rem;
      color: #7a56d1;
      font-weight: 700;
    }
    #closeCartBtn {
      background: #7a56d1;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      align-self: flex-end;
      margin-top: 1rem;
      font-weight: 700;
    }
    #closeCartBtn:hover {
      background: #5a4099;
    }

    /* Responsive */
    @media (max-width: 600px) {
      header {
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
      }
      .brand-name {
        order: 2;
        flex-basis: 100%;
        text-align: center;
      }
      .menu-wrapper {
        order: 1;
      }
      .header-icons {
        order: 3;
      }
      #productsGrid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="menu-wrapper">
    <button id="menuBtn" aria-haspopup="true" aria-expanded="false" aria-controls="menuList">
      Menu ‚ñº
    </button>
    <nav id="menuList" class="menu-list" hidden>
      <ul>
        <li><button class="category-btn active" data-category="all">Toutes les bougies</button></li>
        <li><button class="category-btn" data-category="lueur">Gamme Lueur d‚Äô√Çmes</button></li>
      </ul>
    </nav>
  </div>

  <div class="brand-name" aria-label="Nom de la marque">Lueurs d'√Çmes</div>

  <div class="header-icons">
    <div class="icon account" title="Mon compte" aria-label="Mon compte">üë§</div>
    <div class="icon cart" title="Panier" aria-label="Panier" data-count="0" id="cartCount">üõí</div>
  </div>
</header>

<main>
  <div id="productsGrid" aria-live="polite" aria-label="Liste des bougies"></div>
</main>

<!-- Modal Panier -->
<div id="cartModal" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
  <div id="cartContent">
    <h2 id="cartTitle">Votre Panier</h2>
    <div id="cartItems"></div>
    <button id="closeCartBtn" aria-label="Fermer le panier">Fermer</button>
  </div>
</div>

<script>
  // Donn√©es des produits
  const products = [
    {
      id: 'lueur1',
      name: "Lueur d‚ÄôEspoir",
      description: "Une bougie pour les moments de doute, offrant une lumi√®re int√©rieure et un message d'encouragement.",
      perfume: "Notes d'agrumes et de menthe poivr√©e",
      price: 25,
    },
    {
      id: 'lueur2',
      name: "Lueur d‚ÄôAmour",
      description: "Destin√©e √† raviver les relations, cette bougie diffuse une √©nergie chaleureuse et un message d'affection.",
      perfume: "Rose et vanille",
      price: 27,
    },
    {
      id: 'lueur3',
      name: "Lueur de S√©r√©nit√©",
      description: "Parfaite pour les instants de m√©ditation, elle apporte calme et √©quilibre, accompagn√©e d'un message apaisant.",
      perfume: "Lavande et bois de santal",
      price: 26,
    },
    {
      id: 'lueur4',
      name: "Lueur de Confiance",
      description: "Pour renforcer la confiance en soi, cette bougie inspire courage et d√©termination, avec un message motivant.",
      perfume: "Bois de c√®dre et musc",
      price: 28,
    },
    {
      id: 'lueur5',
      name: "Lueur de Gu√©rison",
      description: "Id√©ale pour les p√©riodes de transition, elle offre un message de gu√©rison et de renouveau.",
      perfume: "Camomille et eucalyptus",
      price: 26,
    },
    {
      id: 'lueur6',
      name: "Lueur d‚ÄôIntuition",
      description: "Encourage l'√©coute de son intuition, avec un message guidant vers la sagesse int√©rieure.",
      perfume: "Patchouli et jasmin",
      price: 27,
    },
    {
      id: 'lueur7',
      name: "Lueur d‚ÄôInspiration",
      description: "Pour stimuler la cr√©ativit√©, cette bougie diffuse une √©nergie inspirante et un message de d√©couverte.",
      perfume: "Fleur d'oranger et ylang-ylang",
      price: 29,
    },
    {
      id: 'lueur8',
      name: "Lueur d‚Äô√Çme",
      description: "La bougie phare, offrant un message profond et spirituel, invitant √† la r√©flexion personnelle.",
      perfume: "Encens et myrrhe",
      price: 30,
    }
  ];

  // DOM Elements
  const productsGrid = document.getElementById('productsGrid');
  const cartCount = document.getElementById('cartCount');
  const cartModal = document.getElementById('cartModal');
  const cartItemsContainer = document.getElementById('cartItems');
  const closeCartBtn = document.getElementById('closeCartBtn');
  const menuBtn = document.getElementById('menuBtn');
  const menuList = document.getElementById('menuList');
  const categoryButtons = document.querySelectorAll('.category-btn');

  // Panier = { productId: qty }
  let cart = {};

  // Cr√©er une carte produit
  function createProductCard(product) {
    const card = document.createElement('article');
    card.className = 'product-card';
    card.setAttribute('tabindex', '0');

    card.innerHTML = `
      <div class="product-name">${product.name}</div>
      <div class="product-description">${product.description}</div>
      <div class="product-description"><em>Parfum:</em> ${product.perfume}</div>
      <div class="product-price">${product.price} ‚Ç¨</div>
      <div class="quantity-wrapper">
        <label for="qty-${product.id}">Quantit√©:</label>
        <input type="number" min="1" value="1" id="qty-${product.id}" aria-label="Quantit√© de ${product.name}" />
      </div>
      <button class="add-to-cart-btn" aria-label="Ajouter ${product.name} au panier">Ajouter au panier</button>
    `;

    // Bouton ajout panier
    const btn = card.querySelector('.add-to-cart-btn');
    btn.addEventListener('click', () => {
      const qtyInput = card.querySelector(`#qty-${product.id}`);
      const qty = parseInt(qtyInput.value);
      if (qty > 0) {
        addToCart(product.id, qty);
      }
    });

    return card;
  }

  // Afficher les produits (filtr√©s)
  function filterProducts(category) {
    productsGrid.innerHTML = '';

    let filteredProducts;
    if(category === 'all') {
      filteredProducts = products;
    } else if(category === 'lueur') {
      filteredProducts = products.filter(p => p.id.startsWith('lueur'));
    } else {
      filteredProducts = [];
    }

    filteredProducts.forEach(p => {
      productsGrid.appendChild(createProductCard(p));
    });
  }

  // Ajouter un produit au panier
  function addToCart(productId, quantity) {
    if (cart[productId]) {
      cart[productId] += quantity;
    } else {
      cart[productId] = quantity;
    }
    updateCartCount();
    showCart();
  }

  // Mettre √† jour le compteur panier
  function updateCartCount() {
    const totalQty = Object.values(cart).reduce((acc, qty) => acc + qty, 0);
    cartCount.setAttribute('data-count', totalQty);
  }

  // Afficher le panier
  function showCart() {
    cartItemsContainer.innerHTML = '';
    if(Object.keys(cart).length === 0) {
      cartItemsContainer.innerHTML = '<p>Votre panier est vide.</p>';
    } else {
      Object.entries(cart).forEach(([id, qty]) => {
        const product = products.find(p => p.id === id);
        if(product) {
          const div = document.createElement('div');
          div.className = 'cart-item';
          div.innerHTML = `
            <span class="cart-item-name">${product.name}</span>
            <span class="cart-item-qty">x${qty}</span>
          `;
          cartItemsContainer.appendChild(div);
        }
      });
    }
    cartModal.classList.add('active');
    cartModal.focus();
  }

  // Fermer le panier
  closeCartBtn.addEventListener('click', () => {
    cartModal.classList.remove('active');
  });

  // Fermer le panier au clic en dehors du contenu
  cartModal.addEventListener('click', (e) => {
    if(e.target === cartModal) {
      cartModal.classList.remove('active');
    }
  });

  // Menu d√©roulant toggle
  let menuOpen = false;
  menuBtn.addEventListener('click', () => {
    menuOpen = !menuOpen;
    menuList.hidden = !menuOpen;
    menuBtn.setAttribute('aria-expanded', menuOpen);
  });

  // Fermer menu si clic en dehors
  document.addEventListener('click', (e) => {
    if (!menuBtn.contains(e.target) && !menuList.contains(e.target)) {
      menuOpen = false;
      menuList.hidden = true;
      menuBtn.setAttribute('aria-expanded', false);
    }
  });

  // Filtrer produits au clic cat√©gorie
  categoryButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      categoryButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      filterProducts(btn.dataset.category);

      // fermer menu
      menuOpen = false;
      menuList.hidden = true;
      menuBtn.setAttribute('aria-expanded', false);
    });
  });

  // Ouvrir panier au clic ic√¥ne
  document.querySelector('.icon.cart').addEventListener('click', showCart);

  // Initialisation page
  filterProducts('all');
  updateCartCount();
</script>
</body>
</html>
